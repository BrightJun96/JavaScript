# try&catch

try/catch문은 에러에 적절히 대응할 수 있게 하는 구문이다.
try에 할당하는 구문에서 에러가 발생하면 catch구문에서 에러를 잡아줄 수 있도록 한다.

에러가 발생했을 때 대처하지않고 방치하면 프로그램이 강제 종료된다.  
try/catch문은 사용하면 프로그램을 종료하지 않게 하고 계속해서 코드를 실행시킬 수 있다.

```js
console.log("start");

fo0();

console.log("end");
```

위와 같이 코드를 작성하고 코드를 실행하면 콘솔에 start가 찍히고 에러가 발생하여 프로그램이 종료되며 console.log('end')코드는 실행되지 않는다.

하지만 다음과 같이 try/catch구문을 사용하면 프로그램이 종료되지않고 코드가 끝까지 실행된다.

```js
console.log("start");

try {
  foo();
} catch (e) {
  console.log(e);
}

console.log("end");
```

기본적으로 에러 처리를 구현하는 방법은 크게 두가지가 있다.

반환하는 값을 **if문이나 논리연산자 및 옵셔널 체이닝 연산자**를 통해 확인해서 처리하는 방법과  
 에러 처리 코드를 미리 등록해 두고 에러가 발생하면 에러 처리 코드로 점프하도록 하는 방법이 있다.

try/catch/finally 문은 두 번째 방법이다.  
총 3가지 문으로 이뤄져있는데 마지막 finally 문은 생략해도 된다.  
finally문은 에러 발생 여부와 상관없이 반드시 한 번은 실행되는 문이다.

try에는 에러가 발생할 것 같은 코드를 할당해주면 되고 catch에서는 try에 있는 코드에서 발생하는 에러를 첫 번째 인자로 전달받을 수 있다.

```js
try {
  // 실행할 코드(에러가 발생할 가능성이 있는 코드)
} catch (error) {
  // try 코드 블록에서 에러가 발생하면 이 코드 블록의 코드가 실행된다.
  // err에는 try 코드 블럭에서 발생한 Error객체가 전달된다.
} finally {
  // 에러 발생과 상관없이 반드시 한 번 실행된다.
}
```

## Error 객체

위 try/catch문에서 에러가 발생했을 때 catch에 전달되는 에러 객체는 따로 생성할 수 있다.

에러 객체는 Error 생성자 함수로 생성할 수 있다.

```js
const err = new Error("!!Error!!~!~!");
```

하지만 에러 객체를 생성했다고 에러가 발생하는 것이 아니라는 것을 알고 있자.

해당 에러 객체는 개발자가 특수한 상황에 에러를 throw하고 싶을 때 throw문에 생성자 함수로 만든 에러 객체를 할당할 수 있겠다.

## throw문

throw문은 에러를 발생시킬 수 있다.

해당 문은 try 코드 블록에서 사용해야한다는 것을 유의하자.

throw문은 어떤 값이라도 상관없지마 일반적으로 에러 객체를 지정한다.

```js
try {
  throw new Error("something went wrong");
} catch (e) {
  console.log(e);
}
```

## Insight

이렇게 try/catch/finally 구문을 이용하면 에러가 발생해도 서비스 프로그램이 종료되지않는다.
만약 실제 서비스에서 꼼꼼히 점검하고 내놓았다해도 만약 에러처리를 하지않고 내보내면 유저들이 접속했을 때  
흰 화면만 보거나 서비스 자체를 경험할 수도 있다.

그러니 항상 대비를 하여 에러 처리를 꼭 하도록 하자.  
에러가 발생할 수 있는 코드를 try/catch문은 감싸주어 에러에 대비하도록 하자.

하지만 에러처리가 난 뒤에 계속 그 에러코드를 가지고 유저가 서비스를 이용하면 오히려 더 안 좋다고 생각될 수 있다.  
왜냐하면 결제나 로그인 등 중요한 정보를 다루는 기능에서 에러가 난 채로 계속 코드가 진행되면  
 이는 유저에게 결제금액이 다르거나 로그인 정보가 다르다는 등 더 큰 에러로 발생할 수 있기 때문이다.

때문에 에러 코드가 있다면 프론트엔드 개발자로서 해당 에러에 대한 UI를 적절히 띄워줘야한다.

try/catch 구문을 쓰는 것과 동시에 위에서 언급했던 첫번째 에러처리 방법 if문/논리연산자/옵셔널 체이닝 연산자 등을 동시에 활용하여 에러 발생 원인을 줄이자.

또한 이를 위해서 에러에 대한 추적과 에러를 발생시킬 수 있는 원인을 줄일 수 있는 타입스크립트를 사용하는 것이 좋겠다.
